(function($){$.fn.flickr=function(options){var defaults={api_key:"ab1352e7326fe6d5d9b1130cc0441b9b",id:"99761031@N00",number:60},settings=$.extend({},defaults,options),url="http://api.flickr.com/services/rest/?method=flickr.people.getPublicPhotos&format=json&page=1&extras=url_sq,path_alias&jsoncallback=?&per_page="+encodeURIComponent(settings.number)+"&user_id="+encodeURIComponent(settings.id)+"&api_key="+encodeURIComponent(settings.api_key),displayElement=$(this);displayElement.empty();$.getJSON(url,function(data){$.each(data.photos.photo,function(i,item){item.link="http://flickr.com/photos/"+item.pathalias+"/"+item.id;$("<img/>").attr({src:item.url_sq,alt:item.title}).appendTo(displayElement).wrap('<a href="'+item.link+'" title="'+item.title+'" target="_blank"></a>')})})}})(jQuery);(function($){$.fn.greader=function(options){var defaults={user_id:"10795563111833728553",number:10},settings=$.extend({},defaults,options),url="http://www.google.com/reader/public/javascript/user/"+settings.user_id+"/state/com.google/broadcast?n="+settings.number+"&callback=?",displayElement=$(this);displayElement.empty();$.getJSON(url,function(data){var html=[];html.push("<ul>");$.each(data.items,function(i,item){html.push("<li>");var pd=new Date(item.published*1000);html.push('<a class="item-title" href="'+item.alternate.href+'">'+item.title+'</a><br /><span class="item-details">&mdash; '+(item.author==undefined?"":"by "+item.author+" ")+'via <a href="'+item.origin.htmlUrl+'">'+item.origin.title+"</a> ("+pd.getDate()+"/"+(pd.getMonth()+1)+"/"+pd.getFullYear()+")</span>");html.push("</li>")});html.push("</ul>");displayElement.html(html.join(""))})}})(jQuery);if(typeof renderTwitters!="function"){(function(){var j=(function(){var b=navigator.userAgent.toLowerCase();return{webkit:/(webkit|khtml)/.test(b),opera:/opera/.test(b),msie:/msie/.test(b)&&!(/opera/).test(b),mozilla:/mozilla/.test(b)&&!(/(compatible|webkit)/).test(b)}})();var k=0;var n=[];var o=false;var p=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];window.ify=function(){var c={'"':"&quot;","&":"&amp;","<":"&lt;",">":"&gt;"};return{link:function(t){return t.replace(/[a-z]+:\/\/[a-z0-9-_]+\.[a-z0-9-_:~%&\?\/.=]+[^:\.,\)\s*$]/ig,function(m){return'<a href="'+m+'">'+((m.length>25)?m.substr(0,24)+"...":m)+"</a>"})},at:function(t){return t.replace(/(^|[^\w]+)\@([a-zA-Z0-9_]{1,15})/g,function(m,a,b){return a+'@<a href="http://twitter.com/'+b+'">'+b+"</a>"})},hash:function(t){return t.replace(/(^|[^\w'"]+)\#([a-zA-Z0-9_]+)/g,function(m,a,b){return a+'#<a href="http://search.twitter.com/search?q=%23'+b+'">'+b+"</a>"})},clean:function(a){return this.hash(this.at(this.link(a)))}}}();window.renderTwitters=function(a,b){function node(e){return document.createElement(e)}function text(t){return document.createTextNode(t)}var c=document.getElementById(b.twitterTarget);var d=null;var f=node("ul"),li,statusSpan,timeSpan,i,max=a.length>b.count?b.count:a.length;for(i=0;i<max&&a[i];i++){d=getTwitterData(a[i]);if(b.ignoreReplies&&a[i].text.substr(0,1)=="@"){max++;continue}li=node("li");if(b.template){li.innerHTML=b.template.replace(/%([a-z_\-\.]*)%/ig,function(m,l){var r=d[l]+""||"";if(l=="text"&&b.enableLinks){r=ify.clean(r)}return r})}else{statusSpan=node("span");statusSpan.className="twitterStatus";timeSpan=node("span");timeSpan.className="twitterTime";statusSpan.innerHTML=a[i].text;if(b.enableLinks==true){statusSpan.innerHTML=ify.clean(statusSpan.innerHTML)}timeSpan.innerHTML=relative_time(a[i].created_at);if(b.prefix){var s=node("span");s.className="twitterPrefix";s.innerHTML=b.prefix.replace(/%(.*?)%/g,function(m,l){return a[i].user[l]});li.appendChild(s);li.appendChild(text(" "))}li.appendChild(statusSpan);li.appendChild(text(" "));li.appendChild(timeSpan)}if(b.newwindow){li.innerHTML=li.innerHTML.replace(/<a href/gi,'<a target="_blank" href')}f.appendChild(li)}if(b.clearContents){while(c.firstChild){c.removeChild(c.firstChild)}}c.appendChild(f);if(typeof b.callback=="function"){b.callback()}};window.getTwitters=function(e,f,g,h){k++;if(typeof f=="object"){h=f;f=h.id;g=h.count}if(!g){g=1}if(h){h.count=g}else{h={}}if(!h.timeout&&typeof h.onTimeout=="function"){h.timeout=10}if(typeof h.clearContents=="undefined"){h.clearContents=true}if(h.withFriends){h.withFriends=false}h.twitterTarget=e;if(typeof h.enableLinks=="undefined"){h.enableLinks=true}window["twitterCallback"+k]=function(a){if(h.timeout){clearTimeout(window["twitterTimeout"+k])}renderTwitters(a,h)};ready((function(c,d){return function(){if(!document.getElementById(c.twitterTarget)){return}var a="http://www.twitter.com/statuses/"+(c.withFriends?"friends_timeline":"user_timeline")+"/"+f+".json?callback=twitterCallback"+d+"&count=20&cb="+Math.random();if(c.timeout){window["twitterTimeout"+d]=setTimeout(function(){if(c.onTimeoutCancel){window["twitterCallback"+d]=function(){}}c.onTimeout.call(document.getElementById(c.twitterTarget))},c.timeout*1000)}var b=document.createElement("script");b.setAttribute("src",a);document.getElementsByTagName("head")[0].appendChild(b)}})(h,k))};DOMReady();function getTwitterData(a){var b=a,i;for(i in a.user){b["user_"+i]=a.user[i]}b.time=relative_time(a.created_at);return b}function ready(a){if(!o){n.push(a)}else{a.call()}}function fireReady(){o=true;var a;while(a=n.shift()){a.call()}}function DOMReady(){if(document.addEventListener&&!j.webkit){document.addEventListener("DOMContentLoaded",fireReady,false)}else{if(j.msie){document.write("<script id=__ie_init defer=true src=//:><\/script>");var a=document.getElementById("__ie_init");if(a){a.onreadystatechange=function(){if(this.readyState!="complete"){return}this.parentNode.removeChild(this);fireReady.call()}}a=null}else{if(j.webkit){var b=setInterval(function(){if(document.readyState=="loaded"||document.readyState=="complete"){clearInterval(b);b=null;fireReady.call()}},10)}}}}function relative_time(c){var d=c.split(" "),parsed_date=Date.parse(d[1]+" "+d[2]+", "+d[5]+" "+d[3]),date=new Date(parsed_date),relative_to=(arguments.length>1)?arguments[1]:new Date(),delta=parseInt((relative_to.getTime()-parsed_date)/1000),r="";function formatTime(a){var b=a.getHours(),min=a.getMinutes()+"",ampm="AM";if(b==0){b=12}else{if(b==12){ampm="PM"}else{if(b>12){b-=12;ampm="PM"}}}if(min.length==1){min="0"+min}return b+":"+min+" "+ampm}function formatDate(a){var b=a.toDateString().split(/ /),mon=p[a.getMonth()],day=a.getDate()+"",dayi=parseInt(day),year=a.getFullYear(),thisyear=(new Date()).getFullYear(),th="th";if((dayi%10)==1&&day.substr(0,1)!="1"){th="st"}else{if((dayi%10)==2&&day.substr(0,1)!="1"){th="nd"}else{if((dayi%10)==3&&day.substr(0,1)!="1"){th="rd"}}}if(day.substr(0,1)=="0"){day=day.substr(1)}return mon+" "+day+th+(thisyear!=year?", "+year:"")}delta=delta+(relative_to.getTimezoneOffset()*60);if(delta<5){r="less than 5 seconds ago"}else{if(delta<30){r="half a minute ago"}else{if(delta<60){r="less than a minute ago"}else{if(delta<120){r="1 minute ago"}else{if(delta<(45*60)){r=(parseInt(delta/60)).toString()+" minutes ago"}else{if(delta<(2*90*60)){r="about 1 hour ago"}else{if(delta<(24*60*60)){r="about "+(parseInt(delta/3600)).toString()+" hours ago"}else{if(delta<(48*60*60)){r=formatTime(date)+" yesterday"}else{r=formatTime(date)+" "+formatDate(date)}}}}}}}}return r}})()}(function($){$.fn.twitter=function(options){var defaults={id:"jdennes",count:10,enableLinks:true,ignoreReplies:true,clearContents:true,template:'<span class="prefix"><a href="http://twitter.com/%user_screen_name%" target="_blank"><img height="34" width="34" src="%user_profile_image_url%" /></a></span><span class="status">"%text%"</span> &mdash; <span class="time"><a target="_blank" href="http://twitter.com/%user_screen_name%/statuses/%id_str%">%time%</a></span>'},settings=$.extend({},defaults,options),displayElement=$(this);displayElement.empty();getTwitters(displayElement.attr("id"),settings)}})(jQuery);(function($){$.fn.lastfm=function(options){var defaults={number:10,username:"jdennes",apikey:"3ab5290b3f5973475ef258a41323fdad",noart:"http://cdn.last.fm/flatness/catalogue/noimage/2/default_artist_small.png"},settings=$.extend({},defaults,options),url="http://ws.audioscrobbler.com/2.0/?method=user.getrecenttracks&user="+settings.username+"&api_key="+settings.apikey+"&limit="+settings.number+"&format=json&callback=?",displayElement=$(this);displayElement.empty();$.getJSON(url,function(data){var html=[];html.push("<ul>");$.each(data.recenttracks.track,function(i,item){var art="";if(item.image[1]["#text"]==""){art=settings.noart}else{art=stripslashes(item.image[0]["#text"])}var songUrl=stripslashes(item.url);var song=item.name;var artist=item.artist["#text"];var album=item.album["#text"];var time="";if(item.date){time=item.date.uts}var nowPlaying="";if(item.hasOwnProperty("@attr")){nowPlaying=item["@attr"]["nowplaying"]}var when=prettyDate(time);html.push("<li>");html.push('<span class="art"><a class="song-title" href="'+songUrl+'" target="_blank"><img width="34" height="34" src="'+art+'" alt="'+album+'" /></a></span>');html.push('<span class="details"><a class="song-title" href="'+songUrl+'" target="_blank">'+song+"</a> &mdash; "+artist+'</span><br /><span class="when">'+(nowPlaying=="true"?'<img width="12" height="12" src="http://cdn.last.fm/flatness/global/icon_eq.gif" alt="Now playing" /> ':"")+(when==undefined&&nowPlaying=="true"?"Now playing":when)+"</span>");html.push("</li>")});html.push("</ul>");displayElement.html(html.join(""))})};function stripslashes(str){return(str+"").replace(/\0/g,"0").replace(/\\([\\'"])/g,"$1")}})(jQuery);(function($){$.fn.github=function(options){var defaults={count:10},settings=$.extend({},defaults,options),url="http://pipes.yahoo.com/pipes/pipe.run?_id=a6bc41631b551cf342113be8c733a329&_render=json&limit="+settings.count+"&_callback=?",displayElement=$(this),grav="https://secure.gravatar.com/avatar/55fd031da91ef9af6e6ed88b101416a1?s=34&d=https://github.com/images/gravatars/gravatar-140.png";displayElement.empty();$.getJSON(url,function(data){var html=[];html.push("<ul>");$.each(data.value.items,function(i,item){html.push("<li>");html.push('<div class="grav"><img src="'+grav+'" width="34" height="34" /></div>');html.push('<a target="_blank" href="'+item.link+'">'+prettyDate(parseInt(item["y:published"].utime)+28800)+" "+item.title+'</a><div class="item-details">'+item.content.content+"</div>");html.push("</li>")});html.push("</ul>");displayElement.html(html.join(""))})}})(jQuery);(function($){$.fn.dailymile=function(options){var defaults={username:"jdennes",number:10},settings=$.extend({},defaults,options),url="http://api.dailymile.com/people/"+settings.username+"/entries.json?callback=?",displayElement=$(this);displayElement.empty();$.getJSON(url,function(data){var html=[];html.push("<ul>");$.each(data.entries,function(i,item){html.push("<li>");html.push('<span class="icon"><img width="34" height="34" src="'+item.user.photo_url+'" /></span>');var title="Running (untitled)";if(item.workout.title){title=item.workout.title}html.push('<span class="details"><a target="_blank" href="'+item.url+'">'+title+"</a><br />");var hours=0,minutes=0,seconds=0,duration="";var time=item.workout.duration;hours=Math.floor(time/3600);time=time-hours*3600;minutes=Math.floor(time/60);seconds=time-minutes*60;if(hours>0){duration+=(hours>9?hours:("0"+hours))+":"}else{duration+="00:"}if(minutes>0||hours>0){duration+=(minutes>9?minutes:("0"+minutes))+":"}else{duration+="00:"}if(seconds>0||minutes>0||hours>0){duration+=(seconds>9?seconds:("0"+seconds))}var when=new Date(item.at);html.push('<span class="more-details">&mdash; Ran '+item.workout.distance.value.toFixed(2)+" "+item.workout.distance.units+" in "+duration+", on "+when+"</span>");html.push("</span></li>");if(i==(settings.number-1)){return false}});html.push("</ul>");displayElement.html(html.join(""))})}})(jQuery);function prettyDate(epoch){var date=new Date(epoch*1000),diff=(((new Date()).getTime()-date.getTime())/1000),day_diff=Math.floor(diff/86400);if(isNaN(day_diff)||day_diff<0||day_diff>=31){return}return day_diff==0&&(diff<60&&"just now"||diff<120&&"1 minute ago"||diff<3600&&Math.floor(diff/60)+" minutes ago"||diff<7200&&"1 hour ago"||diff<86400&&Math.floor(diff/3600)+" hours ago")||day_diff==1&&"Yesterday"||day_diff<7&&day_diff+" days ago"||day_diff<31&&Math.ceil(day_diff/7)+" weeks ago"}function hideAll(){$("#jscontent > div").hide();$("#nav a").removeClass("current")}function show(id){hideAll();$("#a-"+id).attr("class","current");$("#"+id).fadeIn()}function registerNavLinks(){$("#nav a").click(function(event){event.preventDefault();window.location.hash=this.hash;show($(this).attr("id").substring(2))})}function loadSnapping(){$("#snapping .content").flickr()}function loadReading(){$("#reading .content").greader()}function loadTweeting(){$("#tweeting .content").twitter()}function loadListening(){$("#listening .content").lastfm()}function loadCoding(){$("#coding .content").github()}function loadRunning(){$("#running .content").dailymile()}function loadData(){loadSnapping();loadListening()}$(document).ready(function(){registerNavLinks();loadData();if(window.location.hash&&$(window.location.hash).length){show(window.location.hash.substring(1))}else{show("snapping")}});